!function(e){"use strict";function t(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(i))}function i(t){var i=t.target,a=e(i);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;i=n[0]}var s=this;if(s.clk=i,"image"==i.type)if(void 0!==t.offsetX)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=a.offset();s.clk_x=t.pageX-o.left,s.clk_y=t.pageY-o.top}else s.clk_x=t.pageX-i.offsetLeft,s.clk_y=t.pageY-i.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n={};n.fileapi=void 0!==e("<input type='file'/>").get(0).files,n.formdata=void 0!==window.FormData;var s=!!e.fn.prop;e.fn.attr2=function(){if(!s)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function i(t){var i,a,n=e.param(t).split("&"),s=n.length,o=[];for(i=0;s>i;i++)n[i]=n[i].replace(/\+/g," "),a=n[i].split("="),o.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])]);return o}function o(a){for(var n=new FormData,s=0;s<a.length;s++)n.append(a[s].name,a[s].value);if(t.extraData){var o=i(t.extraData);for(s=0;s<o.length;s++)o[s]&&n.append(o[s][0],o[s][1])}t.data=null;var l=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:r||"POST"});t.uploadProgress&&(l.xhr=function(){var e=jQuery.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var i=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(i=Math.ceil(100*(a/n))),t.uploadProgress(e,a,n,i)},!1),e}),l.data=null;var c=l.beforeSend;return l.beforeSend=function(e,t){t.data=n,c&&c.call(this,e,t)},e.ajax(l)}function l(i){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(i){a("cannot get iframe.contentWindow document: "+i)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(i){a("cannot get iframe.contentDocument: "+i),t=e.document}return t}function o(){function t(){try{var e=n(v).readyState;a("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(i){a("Server abort: ",i," (",i.name,")"),l(A),k&&clearTimeout(k),k=void 0}}var i=h.attr2("target"),s=h.attr2("action");w.setAttribute("target",f),r||w.setAttribute("method","POST"),s!=u.url&&w.setAttribute("action",u.url),u.skipEncodingOverride||r&&!/post/i.test(r)||h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&(k=setTimeout(function(){x=!0,l(C)},u.timeout));var o=[];try{if(u.extraData)for(var c in u.extraData)u.extraData.hasOwnProperty(c)&&(e.isPlainObject(u.extraData[c])&&u.extraData[c].hasOwnProperty("name")&&u.extraData[c].hasOwnProperty("value")?o.push(e('<input type="hidden" name="'+u.extraData[c].name+'">').val(u.extraData[c].value).appendTo(w)[0]):o.push(e('<input type="hidden" name="'+c+'">').val(u.extraData[c]).appendTo(w)[0]));u.iframeTarget||(g.appendTo("body"),v.attachEvent?v.attachEvent("onload",l):v.addEventListener("load",l,!1)),setTimeout(t,15);try{w.submit()}catch(d){var p=document.createElement("form").submit;p.apply(w)}}finally{w.setAttribute("action",s),i?w.setAttribute("target",i):h.removeAttr("target"),e(o).remove()}}function l(t){if(!y.aborted&&!D){if(M=n(v),M||(a("cannot access response document"),t=A),t===C&&y)return y.abort("timeout"),S.reject(y,"timeout"),void 0;if(t==A&&y)return y.abort("server abort"),S.reject(y,"error","server abort"),void 0;if(M&&M.location.href!=u.iframeSrc||x){v.detachEvent?v.detachEvent("onload",l):v.removeEventListener("load",l,!1);var i,s="success";try{if(x)throw"timeout";var o="xml"==u.dataType||M.XMLDocument||e.isXMLDoc(M);if(a("isXml="+o),!o&&window.opera&&(null===M.body||!M.body.innerHTML)&&--P)return a("requeing onLoad callback, DOM not available"),setTimeout(l,250),void 0;var r=M.body?M.body:M.documentElement;y.responseText=r?r.innerHTML:null,y.responseXML=M.XMLDocument?M.XMLDocument:M,o&&(u.dataType="xml"),y.getResponseHeader=function(e){var t={"content-type":u.dataType};return t[e]},r&&(y.status=Number(r.getAttribute("status"))||y.status,y.statusText=r.getAttribute("statusText")||y.statusText);var c=(u.dataType||"").toLowerCase(),d=/(json|script|text)/.test(c);if(d||u.textarea){var h=M.getElementsByTagName("textarea")[0];if(h)y.responseText=h.value,y.status=Number(h.getAttribute("status"))||y.status,y.statusText=h.getAttribute("statusText")||y.statusText;else if(d){var f=M.getElementsByTagName("pre")[0],m=M.getElementsByTagName("body")[0];f?y.responseText=f.textContent?f.textContent:f.innerText:m&&(y.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==c&&!y.responseXML&&y.responseText&&(y.responseXML=R(y.responseText));try{E=O(y,c,u)}catch(b){s="parsererror",y.error=i=b||s}}catch(b){a("error caught: ",b),s="error",y.error=i=b||s}y.aborted&&(a("upload aborted"),s=null),y.status&&(s=y.status>=200&&y.status<300||304===y.status?"success":"error"),"success"===s?(u.success&&u.success.call(u.context,E,"success",y),S.resolve(y.responseText,"success",y),p&&e.event.trigger("ajaxSuccess",[y,u])):s&&(void 0===i&&(i=y.statusText),u.error&&u.error.call(u.context,y,s,i),S.reject(y,"error",i),p&&e.event.trigger("ajaxError",[y,u,i])),p&&e.event.trigger("ajaxComplete",[y,u]),p&&!--e.active&&e.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,y,s),D=!0,u.timeout&&clearTimeout(k),setTimeout(function(){u.iframeTarget||g.remove(),y.responseXML=null},100)}}}var c,d,u,p,f,g,v,y,b,$,x,k,w=h[0],S=e.Deferred();if(i)for(d=0;d<m.length;d++)c=e(m[d]),s?c.prop("disabled",!1):c.removeAttr("disabled");if(u=e.extend(!0,{},e.ajaxSettings,t),u.context=u.context||u,f="jqFormIO"+(new Date).getTime(),u.iframeTarget?(g=e(u.iframeTarget),$=g.attr2("name"),$?f=$:g.attr2("name",f)):(g=e('<iframe name="'+f+'" src="'+u.iframeSrc+'" />'),g.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=g[0],y={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var i="timeout"===t?"timeout":"aborted";a("aborting upload... "+i),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(n){}g.attr("src",u.iframeSrc),y.error=i,u.error&&u.error.call(u.context,y,i,t),p&&e.event.trigger("ajaxError",[y,u,i]),u.complete&&u.complete.call(u.context,y,i)}},p=u.global,p&&0===e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[y,u]),u.beforeSend&&u.beforeSend.call(u.context,y,u)===!1)return u.global&&e.active--,S.reject(),S;if(y.aborted)return S.reject(),S;b=w.clk,b&&($=b.name,$&&!b.disabled&&(u.extraData=u.extraData||{},u.extraData[$]=b.value,"image"==b.type&&(u.extraData[$+".x"]=w.clk_x,u.extraData[$+".y"]=w.clk_y)));var C=1,A=2,T=e("meta[name=csrf-token]").attr("content"),I=e("meta[name=csrf-param]").attr("content");I&&T&&(u.extraData=u.extraData||{},u.extraData[I]=T),u.forceSync?o():setTimeout(o,10);var E,M,D,P=50,R=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},F=e.parseJSON||function(e){return window.eval("("+e+")")},O=function(t,i,a){var n=t.getResponseHeader("content-type")||"",s="xml"===i||!i&&n.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;return s&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,i)),"string"==typeof o&&("json"===i||!i&&n.indexOf("json")>=0?o=F(o):("script"===i||!i&&n.indexOf("javascript")>=0)&&e.globalEval(o)),o};return S}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var r,c,d,h=this;"function"==typeof t&&(t={success:t}),r=this.attr2("method"),c=this.attr2("action"),d="string"==typeof c?e.trim(c):"",d=d||window.location.href||"",d&&(d=(d.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:d,success:e.ajaxSettings.success,type:r||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var u={};if(this.trigger("form-pre-serialize",[this,t,u]),u.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=t.traditional;void 0===p&&(p=e.ajaxSettings.traditional);var f,m=[],g=this.formToArray(t.semantic,m);if(t.data&&(t.extraData=t.data,f=e.param(t.data,p)),t.beforeSubmit&&t.beforeSubmit(g,this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[g,this,t,u]),u.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=e.param(g,p);f&&(v=v?v+"&"+f:f),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+v,t.data=null):t.data=v;var y=[];if(t.resetForm&&y.push(function(){h.resetForm()}),t.clearForm&&y.push(function(){h.clearForm(t.includeHidden)}),!t.dataType&&t.target){var b=t.success||function(){};y.push(function(i){var a=t.replaceTarget?"replaceWith":"html";e(t.target)[a](i).each(b,arguments)})}else t.success&&y.push(t.success);if(t.success=function(e,i,a){for(var n=t.context||this,s=0,o=y.length;o>s;s++)y[s].apply(n,[e,i,a||h,h])},t.error){var $=t.error;t.error=function(e,i,a){var n=t.context||this;$.apply(n,[e,i,a,h])}}if(t.complete){var x=t.complete;t.complete=function(e,i){var a=t.context||this;x.apply(a,[e,i,h])}}var k=e('input[type=file]:enabled[value!=""]',this),w=k.length>0,S="multipart/form-data",C=h.attr("enctype")==S||h.attr("encoding")==S,A=n.fileapi&&n.formdata;a("fileAPI :"+A);var T,I=(w||C)&&!A;t.iframe!==!1&&(t.iframe||I)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){T=l(g)}):T=l(g):T=(w||C)&&A?o(g):e.ajax(t),h.removeData("jqxhr").data("jqxhr",T);for(var E=0;E<m.length;E++)m[E]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(n){if(n=n||{},n.delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var s={s:this.selector,c:this.context};return!e.isReady&&s.s?(a("DOM not ready, queuing ajaxForm"),e(function(){e(s.s,s.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return n.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,n,t).on("click.form-plugin",this.selector,n,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",n,t).bind("click.form-plugin",n,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,i){var a=[];if(0===this.length)return a;var s=this[0],o=t?s.getElementsByTagName("*"):s.elements;if(!o)return a;var l,r,c,d,h,u,p;for(l=0,u=o.length;u>l;l++)if(h=o[l],c=h.name,c&&!h.disabled)if(t&&s.clk&&"image"==h.type)s.clk==h&&(a.push({name:c,value:e(h).val(),type:h.type}),a.push({name:c+".x",value:s.clk_x},{name:c+".y",value:s.clk_y}));else if(d=e.fieldValue(h,!0),d&&d.constructor==Array)for(i&&i.push(h),r=0,p=d.length;p>r;r++)a.push({name:c,value:d[r]});else if(n.fileapi&&"file"==h.type){i&&i.push(h);var f=h.files;if(f.length)for(r=0;r<f.length;r++)a.push({name:c,value:f[r],type:h.type});else a.push({name:c,value:"",type:h.type})}else null!==d&&"undefined"!=typeof d&&(i&&i.push(h),a.push({name:c,value:d,type:h.type,required:h.required}));if(!t&&s.clk){var m=e(s.clk),g=m[0];c=g.name,c&&!g.disabled&&"image"==g.type&&(a.push({name:c,value:m.val()}),a.push({name:c+".x",value:s.clk_x},{name:c+".y",value:s.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var s=0,o=n.length;o>s;s++)i.push({name:a,value:n[s]});else null!==n&&"undefined"!=typeof n&&i.push({name:this.name,value:n})}}),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],a=0,n=this.length;n>a;a++){var s=this[a],o=e.fieldValue(s,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(i,o):i.push(o))}return i},e.fieldValue=function(t,i){var a=t.name,n=t.type,s=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!a||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==s&&-1==t.selectedIndex))return null;if("select"==s){var o=t.selectedIndex;if(0>o)return null;for(var l=[],r=t.options,c="select-one"==n,d=c?o+1:r.length,h=c?o:0;d>h;h++){var u=r[h];if(u.selected){var p=u.value;if(p||(p=u.attributes&&u.attributes.value&&!u.attributes.value.specified?u.text:u.value),c)return p;l.push(p)}}return l}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();i.test(a)||"textarea"==n?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=t;else if("option"==this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}(jQuery);